# Pi-hole: A black hole for Internet advertisements
# (c) 2021 Pi-hole, LLC (https://pi-hole.net)
# Network-wide ad blocking via your own hardware.
#
# Pi-hole testing environment configuration (authorative server)
#
# This file is copyright under the latest version of the EUPL.
# Please see LICENSE file for your rights under this license.

# Local DNS address and port
bind-interfaces
port=5554
listen-address=127.0.0.1
no-resolv

auth-zone=ftl,192.168.1.0/24,192.168.2.0/24,fe80::/16
#pdnsutil add-record ftl. . SOA "ns1.ftl. hostmaster.ftl. 1 10800 3600 604800 3600"
auth-soa=1,hostmaster.ftl,10800,3600,604800
auth-server=ns1.ftl
auth-ttl=3600
domain=ftl

# zone data
# Create A records
host-record=a.ftl,192.168.1.1
host-record=gravity.ftl,192.168.1.2
host-record=blacklisted.ftl,192.168.1.3
host-record=whitelisted.ftl,192.168.1.4
host-record=gravity-whitelisted.ftl,192.168.1.5
host-record=regex1.ftl,192.168.2.1
host-record=regex2.ftl,192.168.2.2
host-record=regex5.ftl,192.168.2.3
host-record=regexA.ftl,192.168.2.4
host-record=regex-REPLYv4.ftl,192.168.2.5
host-record=regex-REPLYv6.ftl,192.168.2.6
host-record=regex-REPLYv46.ftl,192.168.2.7
host-record=regex-A.ftl,192.168.2.8
host-record=regex-notA.ftl,192.168.2.9

# Create AAAA records
host-record=aaaa.ftl,fe80::1c01
host-record=regex-REPLYv4.ftl,fe80::2c01
host-record=regex-REPLYv6.ftl,fe80::2c02
host-record=regex-REPLYv46.ftl,fe80::2c03

host-record=any.ftl,192.168.3.1,fe80::3c01

# Create CNAME records
cname=cname-1.ftl,gravity.ftl
cname=cname-2.ftl,cname-1.ftl
cname=cname-3.ftl,cname-2.ftl
cname=cname-4.ftl,cname-3.ftl
cname=cname-5.ftl,cname-4.ftl
cname=cname-6.ftl,cname-5.ftl
cname=cname-7.ftl,cname-6.ftl
cname=cname-ok.ftl,a.ftl

# Create CNAME for SOA test domain
cname=soa.ftl,ftl

# Create PTR records
ptr-record=ptr.ftl,ptr.ftl

# Other testing records
# bad #srv-record=srv.ftl,a.ftl,80,1,0
srv-host=srv.ftl,a.ftl,88,1,0
txt-record=txt.ftl,"Some example text"
# We want this to output $1 without expansion
# shellcheck disable=SC2016
naptr-record=naptr.ftl,20,10,s,http+N2L+N2C+N2R,,ftl.
naptr-record=naptr.ftl,10,10,u,smtp+E2U,!.*([^\.]+[^\.]+)$!mailto:postmaster@$1!i,.
# MX
mx-host=mx.ftl,ns1.ftl,50

# SVCB + HTTPS
# SVCB '1 port="80"'
  # see RFC3597: Handling of Unknown DNS Resource Record (RR) Types
  # and https://ypcs.fi/howto/2020/09/30/announce-https-via-dns/
dns-rr=svcb.ftl,64,00:01:09:70:6F:72:74:3D:22:38:30:22:00

# HTTPS '1 . alpn="h3,h2"'
  # comment above applies
dns-rr=https.ftl,65,00:01:00:00:01:00:08:03:22:68:33:03:68:32:22

# Create reverse lookup zone
#auth-zone=arpa
ptr-record=1.1.168.192.in-addr.arpa,ftl
ptr-record=2.1.168.192.in-addr.arpa,a.ftl
ptr-record=1.0.c.1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.8.e.f.ip6.arpa,ftl
ptr-record=2.0.c.1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.8.e.f.ip6.arpa,aaaa.ftl
